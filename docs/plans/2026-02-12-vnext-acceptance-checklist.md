# VNext 最终验收 Checklist（Demo）

> 日期：2026-02-12  
> 目标：验证“编辑题目 -> 编辑流程 -> 编辑路由 -> 运行调试”全链路可由非开发角色独立完成。

---

## 1. 验收前准备

1. 本地运行环境可打开编辑器页面（HBuilderX 或等效运行方式）。
2. 使用最新代码与数据结构，不启用兼容逻辑。
3. 执行一次全量测试：`node --test`。

---

## 2. 角色验收 A：题目编辑员（30 分钟）

### 2.1 建题与保存

1. 新建一题“听后选择”。
2. 填写题目标题、题组、小题、选项、答案。
3. 设置题组准备/答题时间与音频信息。
4. 点击保存。

**通过标准：**

1. 缺字段时会被阻断并提示到字段级。
2. 补齐后可成功保存。
3. 手机预览能渲染并进入步骤。

---

## 3. 角色验收 B：流程编辑员（60 分钟）

### 3.1 流程编辑与发布

1. 进入流程中心，编辑听后选择流程。
2. 增删至少 1 个步骤，并调整顺序。
3. 保存草稿并填写流程名称/备注。
4. 发布当前版本。

**通过标准：**

1. 保存/发布前展示差异摘要。
2. 发布后生成发布日志。
3. 已发布版本不可直接覆盖修改，只能另存新版本。

---

## 4. 角色验收 C：路由配置员（45 分钟）

### 4.1 规则配置与诊断

1. 新建 2 条规则（不同 `region/scene/grade`）。
2. 使用模拟器输入条件并查看 TopN 命中结果。
3. 人为制造冲突规则并尝试提交。
4. 按诊断建议修复后再次提交。

**通过标准：**

1. 可看到得分拆解（region/scene/grade/priority）。
2. 冲突/死规则/弱覆盖能被识别。
3. 未通过诊断时提交被阻断。
4. 修复后可成功提交。

---

## 5. 角色验收 D：演练与调试

### 5.1 统一运行时链路

1. 在编辑预览运行一遍。
2. 在学习演练模式运行同一题。
3. 打开调试抽屉查看 route hit 与 step timeline。
4. 导出诊断包。

**通过标准：**

1. 预览与演练步骤推进一致。
2. 能看到命中 `profile/module/version`。
3. 轨迹事件完整可读，诊断包可导出。

---

## 6. 开发验收（扩展能力）

### 6.1 插件化扩展约束

1. 检查听后选择步骤是否通过插件注册提供行为。
2. 检查 `QuestionRenderer` 是否为配置路由容器，而非模板硬编码分支。
3. 检查 listening-choice runtime 是否通过插件 `runtimeReducer` 决策步骤自动推进。

**通过标准：**

1. 新增步骤无需修改主渲染器条件链。
2. 运行时规则可由插件覆盖。
3. 对应测试通过。

---

## 7. 回归验收

1. 执行：`node --test`。
2. 记录通过数、失败数与失败用例。

**通过标准：**

1. 全量测试通过。
2. 无阻断级回归。

---

## 8. 验收记录（填写）

| 项 | 结果（通过/失败） | 备注 |
|---|---|---|
| 题目编辑员验收 |  |  |
| 流程编辑员验收 |  |  |
| 路由配置员验收 |  |  |
| 演练与调试验收 |  |  |
| 开发扩展验收 |  |  |
| 全量测试验收 |  |  |

最终结论：`通过 / 有条件通过 / 不通过`
